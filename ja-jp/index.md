# NEO ホワイトペーパー

スマートエコノミーに関する一種の分散型ネットワーク

## NEO の目標：スマートエコノミー

NEO とは、ブロックチェーン技術・デジタル ID を利用して資産のデジタル化を図り、スマートコントラクトを通じてデジタル資産の管理を自動化させることで、「スマートエコノミー」を実現する一種の分散型ネットワークです。

### デジタル資産

デジタル資産とは、電子データの形で存在し、プログラムで制御できる資産です。ブロックチェーン技術を用いる資産のデジタル化は、非集権的・仲介者不要・信頼不要・遡及可能・透明度が高いなどの特徴を持っています。NEO は基盤レベルで多数のデジタル資産に対応することによって、ユーザ自身は NEO で資産の登録・取引・転移が自由に行うことができるだけでなく、デジタル ID を通じて現実の資産と紐付けることができます。ユーザが合法的なデジタル ID を通じて登録した資産は、法律によって保護されるようになります。

NEO におけるデジタル資産は、グローバル資産とコントラクト資産という二つの形式があります。グローバル資産はシステム領域に記録され、すべてのスマートコントラクトやクライアントに認識されます。一方、コントラクト資産はスマートコントラクトごとの独自領域に記録され、該当スマートコントラクトと互換性を持つクライアントしか認識されません。特定な約束された規格に基づいてコントラクト資産を構成することで、多数のクライアントと互換性を持たせることができます。

### デジタル ID

デジタル ID とは、電子データの形で存在する個人・組織・ものに関する身分情報です。現在、PKI（Public Key Infrastructure、公開鍵基盤）に基づいた X.509 は、デジタル ID 方式においては比較的に成熟した規格と見なされています。NEO では、X.509 と互換性を持つデジタル ID 規格を構築することになります。このデジタル ID 規格では、X.509 で規定された階層化した証明書発行方式に対応するだけでなく、Web Of Trust という Peer-to-Peer の証明書発行方式にも対応します。そして、顔・指紋・音声・SMS など多要素認証を通じて、発行・利用においての身分確認を行います。ほかには、ブロックチェーンを OSCP の代わりとして利用し、X.509 の証明書失効リスト（CRL）の管理・登録を行います。

### スマートコントラクト

スマートコントラクトとは、暗号学者であるニック・サボ氏（Nick Szabo）が 1994 年で最初に提唱したコンセプトであり、インターネットそのものとほぼ同じくらい長い歴史を持っています。サボ氏の定義によると、事前に設定された条件が満たされる場合、スマートコントラクトが相応の条項を実行するようになります。ブロックチェーン技術が分散的な、改ざん不可能な、そして信頼性が高いシステムを我々にもたらしたことによって、スマートコントラクトははじめてその力を発揮できるようになります。NEO は NeoContract という、独自のスマートコントラクトフレームワークを持っています。

既存の開発エコシステムとシームレスに連携できることは、NeoContract フレームワークが持っている最大の特徴です。開発者が新しいプログラミング言語を学ぶ必要なく、C#・Javaなどメインストリームのプログラミング言語を使って、日々慣れている IDE（Visual Studio、Eclipse など）の中でスマートコントラクトの開発・テスト・コンパイルを行うことができます。NEO の汎用軽量型仮想マシン「NeoVM」は、高い確定性・並行性・拡張性などの特徴を持っています。NeoContract フレームワークによって、世界中数百万の開発者たちが効率的にスマートコントラクトの開発を行うことができるようになります。NeoContract の詳細スペックについて、別資料に記述されることになります。

### アプリケーションとエコシステム

エコシステムは、オープンソースプロジェクトにとって命をもたらし、不可欠なものです。スマートエコノミーネットワークの実現に向けて、NEO は開発者のエコシステム構築に力を注ぎ、成熟な開発ツール、完備な開発資料、教育・トレーニング活動、及び資金的なサポートを提供しようとしています。以下なる NEO に基づくアプリケーションとエコシステムに対して、サポートを提供することや、ユーザ体験の改善・向上に関する設計に対して、賞金を提供することを、我々は行う予定です。

- ノードプログラム
  - すべての機能を持つ PC フルノードプログラム
  - よりいい体験を提供する PC ライトウェイトノードプログラム
  - ブロックチェーン同期不要な Web / Android / iOS クライアント
  - ハードウェアウォレット
- ブロックチェーンブラウザ
- SDK（開発キット）
- スマートコントラクトコンパイラ・IDE プラグイン
  - C# / VB.Net / F#、Visual Studio
  - Java / Kotlin、Eclipse
  - C / C++ / GO
  - JavaScript / TypeScript
  - Python / Ruby
- 分散型アプリケーション
  - スマートファンド
  - AI 補助付きの法律スマートコントラクト
  - オンラインソーシャル活動
  - 自動化代替通貨流動性提供者
  - 分散型取引所
  - セキュアコミュニケーションプロトコル
  - データマーケットプレース
  - IP マーケットプレース
  - 予測マーケットプレース
  - 広告マーケットプレース
  - 計算力マーケットプレース
  - NeoGas マーケットプレース

## NEO の管理モデル

### 経済モデル

NEO では、「NEO（記号：NEO）」と「NeoGas（記号：GAS）」という二種類の代替通貨が内蔵されています。

NEO は管理通貨で、総数は 1 億単位とし、NEO ネットワークに対する管理権限の実行のために使われます。管理権限とは、投票で台帳登録者の選挙や、NEO ネットワークパラメータの変更などを指しています。NEO の最小単位は 1 で、しかも再分割不可能とします。

GAS は燃料通貨で、最大数量は 1 億単位と制限され、NEO ネットワークの利用におけるリソース制御のために使われます。NEO ネットワークは代替通貨の振込、スマートコントラクトの執行・保存に対して料金を取ることによって、台帳登録者への金銭的なインセンティブ、及びリソース濫用の防止を実現します。GAS の最小単位は 0.00000001 とします。

NEO ネットワークのジェネシスブロックには、すでに 1 億単位の NEO が生成されていますが、GAS が生成されていないので、その数量はゼロです。1 億単位分の NEO に相応する 1 億単位分の GAS は、とある逓減的なアルゴリズムによって、およそ 22 年間を渡ってだんだん NEO 管理通貨のアドレスへと生成されます。NEO 管理通貨が新しいアドレスへ移った場合、その後の GAS も新しいアドレスに生成されるようになります。

ユーザ体験向上のために、NEO ネットワークでは、投票を通じてスレッショルドが設定され、振込取引やスマートコントラクト執行・保存の量がそのスレッショルドを超えない限り、料金が免除されるようになります。大量の異常取引が発生する場合、NeoID によって正当なデジタル ID が付いている取引やスマートコントラクトが優先的に処理されるようになります。正当なデジタル ID が付いていない取引やスマートコントラクトでも、GAS を支払えば優先的に処理されるようになります。

### 配分の仕組み

NEO の配分：

1 億単位分の NEO 管理通貨はそれぞれ 5000 万単位、すなわち半分半分に分けられています。一つの半分（5000 万単位分の NEO）は、NEO 開発費のクラウドファンディングに参加した方々に、それぞれのラウンド・比例に従って配分されます。この部分はすでに配分済みです。

もう一つの半分は NEO 理事会によって管理され、NEO ネットワークの開発・運用及びエコシステムを長期的にサポートするために使われます。この部分は現在凍結中であり、NEO ネットワーク運用開始からの 1 周年日、すなわち 2017 年 10 月 16 日になってから初めて解凍され、利用可能になります。この部分は取引所に入らず、NEO プロジェクトの長期的なサポートのみに使われます。この部分の配分について、下記にように計画されています。

- 1000 万単位（総量の 10%）：NEO 開発メンバーや理事会メンバーに対するインセンティブとして使われる
- 1000 万単位（総量の 10%）：NEO 周辺エコシステムの開発者に対するインセンティブとして使われる
- 1500 万単位（総量の 15%）：他のブロックチェーンプロジェクトに対するクロス投資のために使われる。投資によって獲得した代替通貨は NEO 理事会に帰属し、NEO プロジェクトのみに使われる
- 1500 万単位（総量の 15%）：機動的に使われる
- 毎年使われる NEO は原則的に 1500 万単位を上限とする

GAS の配分：

GAS は新しいブロックが追加されるたびに生成されます。GAS の初期総量はゼロで、新しいブロックの追加とともに増えていき、最終的には約 22 年後に上限の 1 億単位に到達します。NEO には 15 ～ 20 秒ごと新しいブロックが追加されますから、200 万個のブロックが約 1 年間に相当します。

一年目（実際には 0 ～ 200 万個目のブロック）には、新しいブロックごと 8 単位の GAS が生成されます。二年目（実際には 200 ～ 400 万個目のブロック）には、新しいブロックごと 7 単位の GAS が生成されます。このように毎年ブロックごとの GAS の生成数が 1 単位分減っていき、8 年目になるとブロックごとの生成数が 1 まで落ち、それからはもう変わりなく、約 22 年後ブロックの総数が 4400 万個になり、GAS の総量が 1 億単位になると、新しいブロックが追加される時、GAS はもう生成されないようになります。

この発行プランによると、一年目には 16% の GAS、最初からの 4 年間には 52% の GAS、そして最初からの 12 年間には 80% の GAS が生成される予定です。これらの GAS は NEO の所持比例によって相応のアドレスに記録されます。NEO の所持者はいつでも受領トランザクションによって、これらの GAS を NEO のアドレスまで引き取ることができます。

### ガバナンスの仕組み

チェーンガバナンス：NEO 管理通貨の所持者は NEO ネットワークのオーナーかつ管理者で、NEO ネットワークの中で投票トランザクションを起こすことによって管理権限を実行し、そして獲得した NEO 管理通貨に相応する GAS 燃料通貨によって NEO ネットワークの利用権限を実行します。NEO 管理通貨は譲渡可能です。

オフチェーンガバナンス：NEO 理事会とは NEO プロジェクトの創立者によって設立された常務管理機関です。その下には、管理委員会、技術委員会、事務局という組織が存在し、それぞれが戦略意思決定、技術意思決定、具体的な実施を担当します。NEO 理事会は NEO コミュニティに対して責任を持ち、NEO エコシステムの開発・展開を最大なる目標として業務を遂行します。

## NEO の技術実装

### 合意形成の仕組み：DBFT

DBFT（Delegated Byzantine Fault Tolerant）とは、代理投票によって大規模なノードが合意形成に関与するビザンチン・フォールトトレラント性を持つ合意形成の仕組みです。NEO 管理通貨の所持者は投票によって、支持する台帳登録者を選出します。その後、当選した登録者集団が BFT アルゴリズムによって合意を形成し、新しいブロックを作ります。投票は固定任期ではなく、NEO ネットワークの中でリアルタイムかつ持続的に行います。

DBFT は $$n$$ 個ノードから結成された合意システムに対し、$$f=\left\lfloor\dfrac{n-1}{3}\right\rfloor$$のトラレント性を提供できます。このトラレント性は有効性・安全性両方に適用し、一般障害・ビザンチン障害に対して耐性を持ち、そしてあらゆるネットワーク環境にも対応できます。DBFT はいい最終性を持っています。すなわちすべての確認は最終的なので、ブロックチェーンには分岐が発生せず、トランザクションの取り消し・逆戻りも発生しません。

NEO の DBFT 仕組みに基づいて、15 ～ 20 秒ごと一つのブロックが追加され、トランザクションスループットの実測値が約 1000TPS まで達しています。最適化された場合、10000TPS まで達することも可能で、大規模な産業化アプリケーションにも対応できます。

DBFT をデジタル ID と併用すれば、台帳登録者を実名な個人または組織に限定できるようになり、資産の凍結・無効化・継承・取り戻し・判決による譲渡など、通常ではない操作が可能になり、NEO ネットワークを通じる合法的な金融資産の登録・発行に役立つことが予想されます。NEO ネットワークは必要なタイミングでこのような操作に対応する予定です。

### スマートコントラクトフレームワーク：NeoContract

NEO のスマートコントラクトフレームワークは下記にような三つの部分によって構成されています。

**NeoVM - 汎用ブロックチェーン仮想マシン：**

NeoVM とは、JVM や .NET Runtime と似たようなアーキテクチャーを持つ軽量型汎用仮想マシンであり、仮想プロセサによってスマートコントラクトの中の命令を順序的に読み込んで実行し、また命令に従ってプロシージャ制御・算術演算・論理演算などを行います。NeoVM は早い起動スピードや高い汎用性を持っていて、スマートコントラクトのような小さいプログラムと適合性が非常に高く、ブロックチェーン以外のシナリオへの移植、または IDE に組み込まれてより良い開発体験を提供することも可能です。JIT（実行時コンパイラ）を導入して NeoVM の機能を拡張すれば、命令の実行効率も向上できます。

**InteropService - インターオペレーションサービス**

ブロックチェーン台帳・デジタル資産・デジタル ID・持続性ストレージ領域などの基礎サービスを扱うもので、仮想マシンに対して提供される仮想デバイスのようなものです。スマートコントラクトが実行時でこれらのサービスをアクセスすることによって、高度な機能を実現することが可能になります。このような結合度が低い設計によって、**NeoVM はあらゆるブロックチェーンシステムだけでなく、ブロックチェーン以外のシステムまでにも適用し、スマートコントラクトの応用範囲が著しく拡大されることに繋がります。**

**DevPack - コンパイラや IDE プラグイン**

DevPack には高水準言語のコンパイラや IDE プラグインが含まれています。NeoVM が JVM や .NET Runtime と非常に似ているアーキテクチャーを持っていますから、DevPack に内蔵されているコンパイラが Jave バイトコードや .NET MSIL のような中間コードを NeoVM 命令にコンパイルできます。よって、Java /Kotlin、C# プログラマが新しい言語を学ぶ必要なく、VS・Eclipse など日々慣れている IDE を使って直ちにスマートコントラクトの開発に取り組むことができます。**この特徴によって、スマートコントラクトのラーニングコストが著しく低減され、より豊かな NeoContract エコシステムを構築することが可能になります。**

NeoContract はスマートコントラクトを実行する前に、静的分析によってスマートコントラクトのコールツリーを構築できます。確定したコールツリーによって、**NEO ノードがスマートコントラクトに対する動的フラグメンテーションが可能になり、理論的には無限大なスケーラビリティを実現する**ことで、他のブロックチェーンシステムにはあり得る静的フラグメンテーションによる「渋滞効果」を解決できます。

### クロスチェーン・インターオペレーションプロトコル：NeoX

NeoX とはクロスチェーン・インターオペレーションを実現するプロトコルで、「クロスチェーン資産取引プロトコル」や「クロスチェーン分散型トランザクションプロトコル」という二つの部分に分けられます。

**クロスチェーン資産取引プロトコル：**

NeoX は既存の二チェーン間アトミック取引プロトコルを拡張し、複数の参加者が異なるブロックチェーンで資産の取引を行うことができる上に、トランザクションの全プロセスにおいて、必ず完全に成功したか、もしくは完全に失敗したか、といういずれかの状態になることが保証されます。この特性を実現するには、NeoContract の機能を利用し、参加者ごとのためにコントラクトアカウントを作成する必要があります。他のブロックチェーンシステムにかけては、NeoContract との互換性を持たなくても、基本的なスマートコントラクト機能があれば NeoX との互換性が成立します。

**クロスチェーン分散型トランザクションプロトコル：**

クロスチェーン分散型トランザクションとは、トランザクションに所属する複数のプロセスを異なるブロックチェーンの上で分散的に実行させ、かつトランザクション全体の整合性を保証することです。これはクロスチェーン資産取引に対する一種の拡張であり、すなわち資産取引という特定な行動を、あらゆる行動へと拡張します。結果から言えば、NeoX はクロスチェーン・スマートコントラクトを可能にし、すなわち一つのスマートコントラクトのうちの複数の部分を、複数のブロックチェーンの上で実行させて、その実行が全部完了したか、もしくは全部実行前の状態に巻き戻したかということです。これによって、クロスチェーンコラボレーションに莫大な想像力をもたらすことになります。我々はクロスチェーン・スマートコントラクトの適用シナリオを摸索しています。

### 分散型ストレージプロトコル：NeoFS

NeoFS とは、Distributed Hash Table 技術を利用した分散型ストレージプロトコルです。NeoFS には、ファイルパス（URL）の代わりに、ファイルの内容（ハッシュ値）を通じてデータを検索します。大きいファイルは固定サイズのデータブロックに分割され、複数のノードに分散的に保存されます。

このようなシステムには、冗長度と信頼性の間でバランスを取ることが大事です。NeoFS の計画によると、代替通貨によるインセンティブ体制を利用してこの矛盾を解決しようと考えています。ユーザがファイルの信頼性に対する希望を決めることによって、信頼性希望が低いファイルは無料、またはほぼ無料に保存・アクセスされる一方、信頼性希望が高いファイルは主力ノードが提供する安定かつ信頼性が高いサービスによって扱われます。

NeoFS は NeoContract フレームワークの中の InteropService の一つとして、ブロックチェーンの上での大きいファイルの保存、そしてアクセス権限の設定などの能力をスマートコントラクトに与えます。また、NeoFS をデジタル ID と併用すれば、中央管理サーバなしで、デジタル ID を記録するデジタル証明書の P2P 発行・転送・無効化が可能になります。将来的には、古いブロックのデータを NeoFS に保存すれば、大体のフルノードが古いデータをパージできます。これによってもっと高いスケーラビリティを得ることができる同時に、歴史データの整合性も保持できます。

### 耐量子解読暗号：NeoQS

量子コンピュータの登場は、RSA や ECC に基づく暗号システムにとって重大なチャレンジになります。量子コンピュータは、RSA が依存する大整数の因数分解問題、及び ECC が依存する楕円曲線上の離散対数問題を、極めて短い時間のうちに解くことができます。NeoQS とは、格子に基づく暗号システムであり、QS とは Quantum Safe の略です。現在、量子コンピュータはまだ最短ベクトル問題（SVP）や最近ベクトル問題（CVP）を速く解くことができませんから、格子暗号は量子コンピュータに耐えうる最も信頼性が高いアルゴリズムだと言われています。

## まとめ

NEO とは、デジタル資産・デジタル ID・スマートコントラクトを統合する分散型ネットワークです。また、NEO は DBFT、NeoX、NeoFS、NeoQS などのオリジナル技術を駆使して、未来のスマートエコノミーの基盤となります。